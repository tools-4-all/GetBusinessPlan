{
  "model": "gpt-4o",
  "temperature": 0.3,
  "input": [
    {
      "role": "system",
      "content": [
        {
          "type": "text",
          "text": "Sei un analista di mercato senior specializzato in analisi approfondite del mercato italiano. La tua missione è fornire analisi di mercato complete, accurate e basate sulla tua conoscenza aggiornata (fino ad aprile 2024) del mercato italiano.\n\nREGOLE FONDAMENTALI:\n1. Usa la tua conoscenza aggiornata per fornire dati e informazioni accurate sul mercato italiano\n2. Cita fonti note quando disponibili nella tua conoscenza (ISTAT, Unioncamere, report settoriali, ecc.)\n3. Usa dati aggiornati dalla tua conoscenza (ultimi 2-3 anni quando disponibili)\n4. Distingui chiaramente tra dati basati sulla tua conoscenza e stime/assunzioni\n5. Scrivi in italiano formale, stile report professionale\n6. Struttura l'analisi in sezioni chiare e ben organizzate\n7. Includi grafici e visualizzazioni quando appropriato\n8. Fornisci insight strategici e raccomandazioni concrete\n9. Se non hai dati specifici aggiornati, indica chiaramente che sono stime basate su trend noti"
        }
      ]
    },
    {
      "role": "user",
      "content": [
        {
          "type": "text",
          "text": "Conduci un'analisi di mercato PROFONDA e DETTAGLIATA per il seguente contesto. Usa la tua conoscenza aggiornata per fornire informazioni dettagliate sul mercato italiano.\n\nDATI CONTESTO:\n{{USER_DATA_JSON}}\n\nTIPO ANALISI: {{ANALYSIS_TYPE}}\n\nREQUISITI ANALISI:\nPer ogni sezione, fornisci informazioni dettagliate basate sulla tua conoscenza:\n\n1. DIMENSIONI DI MERCATO:\n   - Fornisci stime TAM/SAM/SOM per il settore in Italia basate su dati noti dalla tua conoscenza\n   - Cita fonti note quando disponibili (ISTAT, Unioncamere, report settoriali)\n   - Includi trend di crescita storici e previsioni quando disponibili nella tua conoscenza\n   - Fornisci dati su segmentazione geografica (Nord/Centro/Sud Italia) se noti\n\n2. ANALISI COMPETITOR:\n   - Identifica competitor principali in Italia basandoti sulla tua conoscenza del settore\n   - Fornisci stime su quote di mercato, fatturato, posizionamento quando noti\n   - Analizza punti di forza e debolezza dei competitor principali\n   - Descrivi strategie di pricing e posizionamento tipiche del settore\n\n3. TREND E OPPORTUNITÀ:\n   - Identifica trend emergenti nel settore (ultimi 2-3 anni) dalla tua conoscenza\n   - Descrivi innovazioni tecnologiche o di business model rilevanti\n   - Indica cambiamenti normativi o regolamentari recenti se noti\n   - Identifica opportunità di mercato potenziali\n   - Fornisci informazioni su investimenti e finanziamenti nel settore se disponibili\n\n4. BARRIERE ALL'INGRESSO:\n   - Descrivi requisiti normativi/legali tipici del settore in Italia\n   - Fornisci stime su costi di ingresso nel mercato\n   - Indica licenze, certificazioni necessarie se note\n   - Analizza difficoltà tipiche di accesso al mercato\n\n5. ANALISI SWOT:\n   - Fornisci punti di forza basati su caratteristiche note del mercato italiano\n   - Identifica debolezze tipiche del settore\n   - Descrivi opportunità concrete basate su trend noti\n   - Indica minacce reali per il mercato italiano\n\n6. STRATEGIE DI POSIZIONAMENTO:\n   - Suggerisci posizionamenti di successo basati su esempi noti nel settore\n   - Identifica nicchie di mercato potenziali\n   - Descrivi strategie di differenziazione competitive\n\nFORMATO RISPOSTA:\nDevi restituire ESCLUSIVAMENTE JSON conforme allo schema fornito.\n\nPRIORITÀ ASSOLUTA: RISPETTARE I MINIMI DI PAROLE \n\nOgni sezione deve essere:\n- Dettagliata e approfondita (vedi requisiti minimi di parole sotto - SONO OBBLIGATORI)\n- Basata sulla tua conoscenza aggiornata (cita fonti note quando possibile)\n- Supportata da dati numerici quando disponibili nella tua conoscenza\n- Strutturata con paragrafi completi e dettagliati (non frasi brevi)\n- Inclusiva di grafici quando appropriato (con dati realistici)\n- ESPANSA: ogni punto deve essere spiegato in dettaglio, non solo menzionato\n\nPRIMA DI INVIARE LA RISPOSTA:\n1. Verifica che ogni campo string abbia almeno il numero minimo di parole richiesto\n2. Se una sezione è troppo breve, ESPANDILA con dettagli aggiuntivi\n3. Aggiungi spiegazioni, contesto, esempi concreti per raggiungere i minimi\n4. Non accettare contenuti brevi o superficiali\n\nREQUISITI MINIMI DI PAROLE PER SEZIONE (STRETTAMENTE OBBLIGATORI - NON NEGOZIABILI) \n\nQUESTI SONO MINIMI ASSOLUTI. Ogni sezione DEVE contenere ALMENO il numero di parole indicato. Se una sezione è troppo breve, ESPANDILA SIGNIFICATIVAMENTE.\n\nREQUISITI DETTAGLIATI PER SEZIONE:\n\n1. executive_summary.sintesi: MINIMO ASSOLUTO 600 parole\n   - Deve essere una sintesi completa e approfondita, non un riassunto breve\n   - Includi dettagli su tutti gli aspetti chiave dell'analisi\n   - Espandi ogni punto con spiegazioni dettagliate\n\n2. market_size: MINIMO ASSOLUTO 900 parole totali\n   - tam.descrizione: minimo 200 parole\n   - sam.descrizione: minimo 200 parole\n   - som.descrizione: minimo 200 parole\n   - trend_crescita.descrizione: minimo 150 parole\n   - segmentazione.geografica: minimo 75 parole\n   - segmentazione.per_prodotto: minimo 75 parole\n   - segmentazione.per_canale: minimo 75 parole\n\n3. competitor_analysis: MINIMO ASSOLUTO 1000 parole totali\n   - quote_mercato: minimo 250 parole (analisi dettagliata delle quote di mercato)\n   - posizionamento: minimo 250 parole (analisi approfondita del posizionamento)\n   - punti_forza_debolezza: minimo 500 parole (analisi dettagliata per ogni competitor)\n   - Ogni competitor_principali[].punti_forza e punti_debolezza devono essere liste dettagliate (minimo 3-4 punti ciascuna)\n\n4. trends_opportunities: MINIMO ASSOLUTO 1000 parole totali\n   - Ogni trend_emergenti[].descrizione: minimo 150 parole per trend\n   - Ogni innovazioni[].descrizione: minimo 120 parole per innovazione\n   - Ogni cambiamenti_normativi[].descrizione: minimo 100 parole per cambiamento\n   - Ogni opportunita[].descrizione: minimo 120 parole per opportunità\n   - investimenti.descrizione: minimo 200 parole\n\n5. barriers_entry: MINIMO ASSOLUTO 800 parole totali\n   - Ogni barriere_normative[].descrizione: minimo 120 parole per barriera\n   - Ogni barriere_economiche[].descrizione: minimo 120 parole per barriera\n   - Ogni barriere_tecniche[].descrizione: minimo 100 parole per barriera\n   - Ogni barriere_competitive[].descrizione: minimo 100 parole per barriera\n\n6. swot_analysis: MINIMO ASSOLUTO 800 parole totali\n   - Ogni strengths[].descrizione: minimo 100 parole per punto di forza\n   - Ogni weaknesses[].descrizione: minimo 100 parole per debolezza\n   - Ogni opportunities[].descrizione: minimo 100 parole per opportunità\n   - Ogni threats[].descrizione: minimo 100 parole per minaccia\n   - Ogni categoria (strengths, weaknesses, opportunities, threats) deve avere MINIMO 200 parole totali\n\n7. positioning_strategy: MINIMO ASSOLUTO 600 parole totali\n   - posizionamento_raccomandato: minimo 200 parole\n   - Ogni differenziazione[].descrizione: minimo 80 parole per elemento\n   - Ogni nicchie_mercato[].descrizione: minimo 100 parole per nicchia\n   - Ogni strategie_ingresso[].descrizione: minimo 100 parole per strategia\n\nREGOLE CRITICHE:\n- Conta le parole PRIMA di inviare la risposta. Se una sezione è sotto il minimo, ESPANDILA.\n- Non accettare risposte brevi o superficiali. Ogni sezione deve essere COMPLETA e DETTAGLIATA.\n- I campi array (liste) non contano nel conteggio, ma devono comunque essere dettagliati e completi.\n- Se hai dubbi sulla lunghezza, SEMPRE meglio essere più dettagliato che meno.\n- Questi sono MINIMI: superarli è incoraggiato, ma non scendere mai sotto questi limiti.\n\nIMPORTANTE: Ogni campo di tipo \"string\" che contiene testo narrativo deve rispettare i minimi indicati. I campi array (liste) non contano nel conteggio delle parole, ma devono essere dettagliati e completi.\n\nIMPORTANTE:\n- Se non hai dati specifici aggiornati, indica chiaramente che sono stime/assunzioni basate su trend noti\n- Cita fonti note quando possibile (ISTAT, Unioncamere, report settoriali)\n- Usa dati aggiornati dalla tua conoscenza\n- Per il mercato italiano, fai riferimento a fonti italiane note\n- Non inventare dati specifici: se non li hai, usa formulazioni prudenti come \"si stima che...\", \"secondo trend noti...\", \"basandosi su dati storici...\""
        }
      ]
    }
  ],
  
  "text": {
    "format": {
      "type": "json_schema",
      "name": "market_analysis_report_it",
      "strict": true,
      "schema": {
        "type": "object",
        "additionalProperties": false,
        "required": [
          "meta",
          "executive_summary",
          "market_size",
          "competitor_analysis",
          "trends_opportunities",
          "barriers_entry",
          "swot_analysis",
          "positioning_strategy",
          "charts",
          "sources",
          "assumptions"
        ],
        "properties": {
          "meta": {
            "type": "object",
            "additionalProperties": false,
            "required": ["data_generazione", "tipo_analisi", "settore", "area_geografica", "segmento_target"],
            "properties": {
              "data_generazione": { "type": "string" },
              "tipo_analisi": { "type": "string", "enum": ["standard", "deep"] },
              "settore": { "type": "string" },
              "area_geografica": { "type": "string" },
              "segmento_target": { "type": "string" }
            }
          },
          "executive_summary": {
            "type": "object",
            "additionalProperties": false,
            "required": ["sintesi", "punti_chiave", "raccomandazioni"],
            "properties": {
              "sintesi": { "type": "string" },
              "punti_chiave": {
                "type": "array",
                "items": { "type": "string" },
                "minItems": 3,
                "maxItems": 7
              },
              "raccomandazioni": {
                "type": "array",
                "items": { "type": "string" },
                "minItems": 3,
                "maxItems": 5
              }
            }
          },
          "market_size": {
            "type": "object",
            "additionalProperties": false,
            "required": ["tam", "sam", "som", "trend_crescita", "segmentazione"],
            "properties": {
              "tam": {
                "type": "object",
                "additionalProperties": false,
                "required": ["valore", "unita", "fonte", "anno", "descrizione"],
                "properties": {
                  "valore": { "type": "number" },
                  "unita": { "type": "string", "enum": ["EUR", "USD", "milioni_EUR"] },
                  "fonte": { "type": "string" },
                  "anno": { "type": "string" },
                  "descrizione": { "type": "string" }
                }
              },
              "sam": {
                "type": "object",
                "additionalProperties": false,
                "required": ["valore", "unita", "fonte", "anno", "descrizione"],
                "properties": {
                  "valore": { "type": "number" },
                  "unita": { "type": "string", "enum": ["EUR", "USD", "milioni_EUR"] },
                  "fonte": { "type": "string" },
                  "anno": { "type": "string" },
                  "descrizione": { "type": "string" }
                }
              },
              "som": {
                "type": "object",
                "additionalProperties": false,
                "required": ["valore", "unita", "fonte", "anno", "descrizione"],
                "properties": {
                  "valore": { "type": "number" },
                  "unita": { "type": "string", "enum": ["EUR", "USD", "milioni_EUR"] },
                  "fonte": { "type": "string" },
                  "anno": { "type": "string" },
                  "descrizione": { "type": "string" }
                }
              },
              "trend_crescita": {
                "type": "object",
                "additionalProperties": false,
                "required": ["tasso_crescita_annuale", "periodo", "fonte", "descrizione"],
                "properties": {
                  "tasso_crescita_annuale": { "type": "number" },
                  "periodo": { "type": "string" },
                  "fonte": { "type": "string" },
                  "descrizione": { "type": "string" }
                }
              },
              "segmentazione": {
                "type": "object",
                "additionalProperties": false,
                "required": ["geografica", "per_prodotto", "per_canale"],
                "properties": {
                  "geografica": { "type": "string" },
                  "per_prodotto": { "type": "string" },
                  "per_canale": { "type": "string" }
                }
              }
            }
          },
          "competitor_analysis": {
            "type": "object",
            "additionalProperties": false,
            "required": ["competitor_principali", "quote_mercato", "posizionamento", "punti_forza_debolezza"],
            "properties": {
              "competitor_principali": {
                "type": "array",
                "items": {
                  "type": "object",
                  "additionalProperties": false,
                  "required": ["nome", "tipo", "fatturato_stimato", "quote_mercato", "posizionamento", "punti_forza", "punti_debolezza"],
                  "properties": {
                    "nome": { "type": "string" },
                    "tipo": { "type": "string", "enum": ["diretto", "indiretto"] },
                    "fatturato_stimato": { "type": "string" },
                    "quote_mercato": { "type": "string" },
                    "posizionamento": { "type": "string" },
                    "punti_forza": {
                      "type": "array",
                      "items": { "type": "string" },
                      "minItems": 2,
                      "maxItems": 5
                    },
                    "punti_debolezza": {
                      "type": "array",
                      "items": { "type": "string" },
                      "minItems": 2,
                      "maxItems": 5
                    }
                  }
                },
                "minItems": 3,
                "maxItems": 8
              },
              "quote_mercato": { "type": "string" },
              "posizionamento": { "type": "string" },
              "punti_forza_debolezza": { "type": "string" }
            }
          },
          "trends_opportunities": {
            "type": "object",
            "additionalProperties": false,
            "required": ["trend_emergenti", "innovazioni", "cambiamenti_normativi", "opportunita", "investimenti"],
            "properties": {
              "trend_emergenti": {
                "type": "array",
                "items": {
                  "type": "object",
                  "additionalProperties": false,
                  "required": ["titolo", "descrizione", "impatto", "fonte"],
                  "properties": {
                    "titolo": { "type": "string" },
                    "descrizione": { "type": "string" },
                    "impatto": { "type": "string", "enum": ["alto", "medio", "basso"] },
                    "fonte": { "type": "string" }
                  }
                },
                "minItems": 3,
                "maxItems": 7
              },
              "innovazioni": {
                "type": "array",
                "items": {
                  "type": "object",
                  "additionalProperties": false,
                  "required": ["titolo", "descrizione", "tipo"],
                  "properties": {
                    "titolo": { "type": "string" },
                    "descrizione": { "type": "string" },
                    "tipo": { "type": "string", "enum": ["tecnologica", "business_model", "processo"] }
                  }
                },
                "minItems": 2,
                "maxItems": 5
              },
              "cambiamenti_normativi": {
                "type": "array",
                "items": {
                  "type": "object",
                  "additionalProperties": false,
                  "required": ["titolo", "descrizione", "impatto", "data_entrata_vigore"],
                  "properties": {
                    "titolo": { "type": "string" },
                    "descrizione": { "type": "string" },
                    "impatto": { "type": "string", "enum": ["positivo", "negativo", "neutro"] },
                    "data_entrata_vigore": { "type": "string" }
                  }
                },
                "minItems": 0,
                "maxItems": 5
              },
              "opportunita": {
                "type": "array",
                "items": {
                  "type": "object",
                  "additionalProperties": false,
                  "required": ["titolo", "descrizione", "potenziale"],
                  "properties": {
                    "titolo": { "type": "string" },
                    "descrizione": { "type": "string" },
                    "potenziale": { "type": "string", "enum": ["alto", "medio", "basso"] }
                  }
                },
                "minItems": 3,
                "maxItems": 6
              },
              "investimenti": {
                "type": "object",
                "additionalProperties": false,
                "required": ["volume_totale", "periodo", "fonte", "descrizione"],
                "properties": {
                  "volume_totale": { "type": "string" },
                  "periodo": { "type": "string" },
                  "fonte": { "type": "string" },
                  "descrizione": { "type": "string" }
                }
              }
            }
          },
          "barriers_entry": {
            "type": "object",
            "additionalProperties": false,
            "required": ["barriere_normative", "barriere_economiche", "barriere_tecniche", "barriere_competitive"],
            "properties": {
              "barriere_normative": {
                "type": "array",
                "items": {
                  "type": "object",
                  "additionalProperties": false,
                  "required": ["titolo", "descrizione", "costo_stimato"],
                  "properties": {
                    "titolo": { "type": "string" },
                    "descrizione": { "type": "string" },
                    "costo_stimato": { "type": "string" }
                  }
                },
                "minItems": 0,
                "maxItems": 5
              },
              "barriere_economiche": {
                "type": "array",
                "items": {
                  "type": "object",
                  "additionalProperties": false,
                  "required": ["titolo", "descrizione", "costo_stimato"],
                  "properties": {
                    "titolo": { "type": "string" },
                    "descrizione": { "type": "string" },
                    "costo_stimato": { "type": "string" }
                  }
                },
                "minItems": 0,
                "maxItems": 5
              },
              "barriere_tecniche": {
                "type": "array",
                "items": {
                  "type": "object",
                  "additionalProperties": false,
                  "required": ["titolo", "descrizione"],
                  "properties": {
                    "titolo": { "type": "string" },
                    "descrizione": { "type": "string" }
                  }
                },
                "minItems": 0,
                "maxItems": 5
              },
              "barriere_competitive": {
                "type": "array",
                "items": {
                  "type": "object",
                  "additionalProperties": false,
                  "required": ["titolo", "descrizione"],
                  "properties": {
                    "titolo": { "type": "string" },
                    "descrizione": { "type": "string" }
                  }
                },
                "minItems": 0,
                "maxItems": 5
              }
            }
          },
          "swot_analysis": {
            "type": "object",
            "additionalProperties": false,
            "required": ["strengths", "weaknesses", "opportunities", "threats"],
            "properties": {
              "strengths": {
                "type": "array",
                "items": {
                  "type": "object",
                  "additionalProperties": false,
                  "required": ["titolo", "descrizione", "evidenza"],
                  "properties": {
                    "titolo": { "type": "string" },
                    "descrizione": { "type": "string" },
                    "evidenza": { "type": "string" }
                  }
                },
                "minItems": 3,
                "maxItems": 6
              },
              "weaknesses": {
                "type": "array",
                "items": {
                  "type": "object",
                  "additionalProperties": false,
                  "required": ["titolo", "descrizione", "impatto"],
                  "properties": {
                    "titolo": { "type": "string" },
                    "descrizione": { "type": "string" },
                    "impatto": { "type": "string", "enum": ["alto", "medio", "basso"] }
                  }
                },
                "minItems": 2,
                "maxItems": 5
              },
              "opportunities": {
                "type": "array",
                "items": {
                  "type": "object",
                  "additionalProperties": false,
                  "required": ["titolo", "descrizione", "potenziale", "fonte"],
                  "properties": {
                    "titolo": { "type": "string" },
                    "descrizione": { "type": "string" },
                    "potenziale": { "type": "string", "enum": ["alto", "medio", "basso"] },
                    "fonte": { "type": "string" }
                  }
                },
                "minItems": 3,
                "maxItems": 6
              },
              "threats": {
                "type": "array",
                "items": {
                  "type": "object",
                  "additionalProperties": false,
                  "required": ["titolo", "descrizione", "probabilita", "impatto"],
                  "properties": {
                    "titolo": { "type": "string" },
                    "descrizione": { "type": "string" },
                    "probabilita": { "type": "string", "enum": ["alta", "media", "bassa"] },
                    "impatto": { "type": "string", "enum": ["alto", "medio", "basso"] }
                  }
                },
                "minItems": 2,
                "maxItems": 5
              }
            }
          },
          "positioning_strategy": {
            "type": "object",
            "additionalProperties": false,
            "required": ["posizionamento_raccomandato", "differenziazione", "nicchie_mercato", "strategie_ingresso"],
            "properties": {
              "posizionamento_raccomandato": { "type": "string" },
              "differenziazione": {
                "type": "array",
                "items": {
                  "type": "object",
                  "additionalProperties": false,
                  "required": ["elemento", "descrizione"],
                  "properties": {
                    "elemento": { "type": "string" },
                    "descrizione": { "type": "string" }
                  }
                },
                "minItems": 3,
                "maxItems": 6
              },
              "nicchie_mercato": {
                "type": "array",
                "items": {
                  "type": "object",
                  "additionalProperties": false,
                  "required": ["nicchia", "descrizione", "potenziale"],
                  "properties": {
                    "nicchia": { "type": "string" },
                    "descrizione": { "type": "string" },
                    "potenziale": { "type": "string", "enum": ["alto", "medio", "basso"] }
                  }
                },
                "minItems": 2,
                "maxItems": 5
              },
              "strategie_ingresso": {
                "type": "array",
                "items": {
                  "type": "object",
                  "additionalProperties": false,
                  "required": ["strategia", "descrizione", "pro", "contro"],
                  "properties": {
                    "strategia": { "type": "string" },
                    "descrizione": { "type": "string" },
                    "pro": {
                      "type": "array",
                      "items": { "type": "string" },
                      "minItems": 2,
                      "maxItems": 4
                    },
                    "contro": {
                      "type": "array",
                      "items": { "type": "string" },
                      "minItems": 1,
                      "maxItems": 3
                    }
                  }
                },
                "minItems": 2,
                "maxItems": 4
              }
            }
          },
          "charts": {
            "type": "array",
            "items": {
              "type": "object",
              "additionalProperties": false,
              "required": ["id", "titolo", "tipo", "series", "x_label", "y_label", "caption"],
              "properties": {
                "id": { "type": "string" },
                "titolo": { "type": "string" },
                "tipo": { "type": "string", "enum": ["line", "bar", "pie"] },
                "x_label": { "type": "string" },
                "y_label": { "type": "string" },
                "caption": { "type": "string" },
                "series": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "additionalProperties": false,
                    "required": ["name", "points"],
                    "properties": {
                      "name": { "type": "string" },
                      "points": {
                        "type": "array",
                        "items": {
                          "type": "object",
                          "additionalProperties": false,
                          "required": ["x", "y"],
                          "properties": {
                            "x": { "type": "string" },
                            "y": { "type": "number" }
                          }
                        }
                      }
                    }
                  },
                  "minItems": 1
                }
              }
            },
            "minItems": 3,
            "maxItems": 8
          },
          "sources": {
            "type": "array",
            "items": {
              "type": "object",
              "additionalProperties": false,
              "required": ["titolo", "url", "tipo", "data_accesso", "descrizione"],
              "properties": {
                "titolo": { "type": "string" },
                "url": { "type": "string" },
                "tipo": { "type": "string", "enum": ["report", "articolo", "sito_web", "dati_istat", "altro"] },
                "data_accesso": { "type": "string" },
                "descrizione": { "type": "string" }
              }
            },
            "minItems": 5,
            "maxItems": 20
          },
          "assumptions": {
            "type": "array",
            "items": { "type": "string" },
            "minItems": 0,
            "maxItems": 10
          }
        }
      }
    }
  }
}
